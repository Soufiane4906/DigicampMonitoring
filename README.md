# üéØ DigicampMonitoring

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2.0-green.svg)
![Angular](https://img.shields.io/badge/Angular-17-red.svg)
![Java](https://img.shields.io/badge/Java-17-orange.svg)
![License](https://img.shields.io/badge/license-Private-lightgrey.svg)

Application web de gestion des projets et des ressources pour le p√©rim√®tre Digicamp. Elle permet de suivre les mouvements en termes de ressources, leur affectation aux diff√©rents projets internes et de g√©n√©rer des newsletters de projets en PDF.

## üìö Documentation

- üöÄ **[D√©marrage Rapide](./docs/QUICKSTART.md)** - Guide de d√©marrage en 5 minutes
- üìñ **[Guide Utilisateur](./docs/USER_GUIDE.md)** - Guide complet pour utiliser l'application
- üìò **[Documentation Technique](./docs/TECHNICAL_DOCUMENTATION.md)** - Architecture, diagrammes et API
- üé® **[Guide de Style](./docs/STYLE_GUIDE.md)** - Design system et styles SCSS
- üê≥ **[Guide de D√©ploiement Docker](./docs/DOCKER_DEPLOYMENT.md)** - D√©ploiement avec Docker Compose
- üì∏ **[Guide Upload d'Images](./docs/IMAGE_UPLOAD_GUIDE.md)** - Upload de logos et photos avec drag & drop
- üîå **[√âtat des Endpoints API](./docs/API_ENDPOINTS_STATUS.md)** - Documentation compl√®te des endpoints

## ‚ú® Fonctionnalit√©s

### üîê Authentification
- ‚úÖ Connexion / Inscription avec JWT
- ‚úÖ D√©l√©gation de droits (√† venir)
- ‚úÖ Session s√©curis√©e

### üìÅ Gestion des Projets
- ‚úÖ **CRUD complet** : Cr√©er, Lire, Modifier, Supprimer
- ‚úÖ **Upload de logo** : Drag & drop d'images (max 5MB)
  - Support multipart/form-data
  - Support Base64 depuis le frontend
  - Pr√©visualisation en temps r√©el
  - Validation c√¥t√© client et serveur
- ‚úÖ **√âditeur riche** : Description avec formatage (Quill)
- ‚úÖ **Gestion des dates** : Date de d√©but/fin avec calendrier
- ‚úÖ **Statuts param√©trables** : En cours, Termin√©, En pause, Annul√©, Planifi√©
- ‚úÖ **Recherche et filtres** : Par nom, statut, date
- ‚úÖ **Affichage moderne** avec avatars et badges
- ‚úÖ **Dialog de confirmation** pour les suppressions
- ‚úÖ **Composant r√©utilisable** : ImageUploadComponent avec drag & drop

### üë• Gestion des Collaborateurs
- ‚úÖ **CRUD complet** : Gestion des collaborateurs
- ‚úÖ **Upload de photo** : Drag & drop de photos professionnelles (max 5MB)
  - Zone de d√©p√¥t stylis√©e
  - Animation au survol
  - Compression automatique
  - Stockage optimis√©
- ‚úÖ **Informations d√©taill√©es** :
  - Nom, Pr√©nom, Email professionnel
  - Grade : A4, A5, B1, B2, B3, C1, C2, C3
  - Poste : D√©veloppeur, Tech Lead, PO, QA, Scrum Master, etc.
  - Site : Casa, Rabat, Indiff√©rent
- ‚úÖ **Gestion des comp√©tences** : Tags de skills techniques (Chips)
- ‚úÖ **Disponibilit√©** : Toggle Disponible / Occup√©
- ‚úÖ **Recherche et filtres** : Multi-crit√®res
- ‚úÖ **Dialog de confirmation** pour les suppressions

### üì∏ Syst√®me d'Upload d'Images
- ‚úÖ **Composant moderne** : ImageUploadComponent standalone
  - Interface drag & drop √©l√©gante
  - Animations fluides (float, hover, scale)
  - Validation en temps r√©el (type, taille)
  - Pr√©visualisation imm√©diate
  - Suppression avec confirmation
- ‚úÖ **Backend robuste** : FileStorageService
  - Support multipart et Base64
  - Validation MIME types
  - G√©n√©ration de noms uniques (UUID)
  - Stockage local avec gestion de r√©pertoires
  - Endpoints RESTful s√©curis√©s
- ‚úÖ **Types support√©s** : JPG, PNG, GIF, SVG, WebP
- ‚úÖ **S√©curit√©** : Validation taille, type, path traversal prevention

### üîó Affectation Ressources
- ‚úÖ Affecter des collaborateurs aux projets
- ‚úÖ Vue des disponibilit√©s
- ‚úÖ Expression des besoins par profil (grade, techno, site)
- ‚úÖ D√©saffectation automatique

### üìÑ Newsletter PDF
- ‚úÖ G√©n√©ration automatique de newsletter
- ‚úÖ Template professionnel incluant :
  - Logo et nom du projet
  - Description et objectifs
  - Collaborateurs avec photos
  - Comp√©tences et besoins
- ‚úÖ Export PDF pr√™t √† partager

## üèóÔ∏è Architecture

```mermaid
graph TB
    subgraph "Frontend - Angular 17"
        A[Components] --> B[Services]
        B --> C[Guards]
        D[ImageUploadComponent] --> B
    end
    
    subgraph "Backend - Spring Boot 3.2"
        E[Controllers] --> F[Use Cases]
        F --> G[Domain Services]
        G --> H[Repositories]
        I[FileStorageService] --> J[Disk Storage]
    end
    
    subgraph "Database"
        K[(SQL Server 2022)]
    end
    
    B -->|HTTP/REST + JWT| E
    D -->|Base64/Multipart| E
    G -->|JPA/Hibernate| K
    I -->|Read/Write| J
    
    style A fill:#667eea
    style D fill:#f5576c
    style E fill:#764ba2
    style I fill:#4CAF50
    style K fill:#f5576c
```

### Technologies

#### Backend
- **Java 17** - Langage de programmation
- **Spring Boot 3.2.0** - Framework backend
- **Spring Security** - S√©curit√© et authentification
- **JWT (JJWT 0.12.3)** - Tokens d'authentification
- **JPA/Hibernate** - ORM
- **SQL Server 2022** - Base de donn√©es
- **iText 7** - G√©n√©ration PDF
- **Maven** - Gestion des d√©pendances
- **FileStorageService** - Gestion d'uploads avec support Base64

#### Frontend
- **Angular 17** - Framework frontend avec standalone components
- **TypeScript 5.2** - Langage
- **PrimeNG** - Biblioth√®que UI moderne
  - Table, Dialog, Calendar, **Editor (Quill)**
  - **FileUpload**, Dropdown, Chips, Avatar
  - Button, Card, Tag, MenuBar, Toast
  - ConfirmDialog, ConfirmationService
- **Quill 1.3.7** - √âditeur de texte riche
- **RxJS** - Programmation r√©active
- **SCSS** - Styles avec design system moderne
- **HTML5 Drag & Drop API** - Upload d'images moderne

#### DevOps
- **Docker & Docker Compose** - Conteneurisation
- **Git & GitHub** - Contr√¥le de version

## üöÄ Installation

### Pr√©requis
- **Docker Desktop** (recommand√©)
- **Git**
- Node.js 18+ (pour d√©veloppement local)
- Java 17+ (pour d√©veloppement local)

### Installation Rapide avec Docker

```bash
# 1. Cloner le projet
git clone https://github.com/Soufiane4906/DigicampMonitoring.git
cd DigicampMonitoring

# 2. D√©marrer tous les services
docker-compose up -d

# 3. V√©rifier les logs
docker-compose logs -f

# 4. Acc√©der √† l'application
# Frontend: http://localhost
# Backend API: http://localhost:8080
# SQL Server: localhost:1433
```

üìñ **Pour plus de d√©tails, consultez le [Guide de D√©ploiement Docker](./docs/DOCKER_DEPLOYMENT.md)**

### Installation Locale (D√©veloppement)

#### Backend
```bash
cd back
./mvnw clean install
./mvnw spring-boot:run
```

#### Frontend
```bash
cd front
npm install
npm start
# Application disponible sur http://localhost:4200
```

## üìñ Utilisation

### 1. Premi√®re Connexion

1. Ouvrez `http://localhost`
2. Cr√©ez un compte via **"S'inscrire"**
3. Connectez-vous avec vos identifiants

### 2. Dashboard

Le dashboard vous donne une vue d'ensemble :
- üìä **Statistiques** : Nombre de projets et collaborateurs
- üöÄ **Actions rapides** : Acc√®s direct aux fonctionnalit√©s principales

### 3. Cr√©er un Projet avec Logo

1. **Projets** ‚Üí **Nouveau projet**
2. **Upload du logo** :
   - Glissez-d√©posez une image dans la zone pr√©vue
   - OU cliquez pour s√©lectionner un fichier
   - Formats : JPG, PNG, SVG (max 5MB)
   - Pr√©visualisation instantan√©e
3. Remplissez les autres champs :
   - Nom du projet ‚≠ê
   - Description/Objectifs ‚≠ê (√©diteur riche Quill)
   - Date de d√©but ‚≠ê
   - Date de fin (optionnelle)
   - Statut ‚≠ê
4. **Cr√©er**

### 4. Ajouter un Collaborateur avec Photo

1. **Collaborateurs** ‚Üí **Nouveau collaborateur**
2. **Upload de photo** :
   - Zone drag & drop avec animation
   - Aper√ßu en temps r√©el
   - Boutons d'√©dition/suppression au survol
3. Remplissez les informations :
   - Pr√©nom & Nom ‚≠ê
   - Email ‚≠ê
   - Grade ‚≠ê (A4-C3)
   - Poste ‚≠ê
   - Site ‚≠ê (Casa/Rabat/Indiff√©rent)
   - Comp√©tences (tags cliquables)
   - Disponibilit√© (toggle)
4. **Cr√©er**

### 5. Affecter des Ressources

1. Ouvrez un **projet**
2. **Affecter collaborateur**
3. S√©lectionnez les collaborateurs disponibles
4. **Affecter**

### 6. G√©n√©rer une Newsletter

1. Ouvrez un **projet**
2. **G√©n√©rer newsletter**
3. Le PDF se t√©l√©charge automatiquement avec :
   - Logo du projet
   - Photos des collaborateurs
   - Comp√©tences format√©es

üìñ **Pour un guide d√©taill√©, consultez le [Guide Utilisateur](./docs/USER_GUIDE.md)**

## üé® Design System

### Couleurs Principales

| Couleur | Hex | Usage |
|---------|-----|-------|
| Primary Purple | `#667eea` | Boutons, liens, headers |
| Secondary Purple | `#764ba2` | Gradients, accents |
| Pink | `#f5576c` | Collaborateurs, dangers |
| Success | `#4CAF50` | √âtats de succ√®s |
| Warning | `#FF9800` | Avertissements |
| Info | `#2196F3` | Informations |
| Gray 100 | `#f9fafb` | Backgrounds clairs |
| Gray 300 | `#d1d5db` | Bordures |

### Gradients Signature

```scss
// Primary Gradient
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

// Secondary Gradient
background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);

// Background Gradient
background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);

// Upload Zone Gradient
background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
```

### Animations

```scss
// Float Animation (Upload Icon)
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

// Hover Effects
.drop-zone:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px -5px rgba(102, 126, 234, 0.1);
}
```

üé® **Pour plus de d√©tails, consultez le [Guide de Style](./docs/STYLE_GUIDE.md)**

## üìä Structure du Projet

```
DigicampMonitoring/
‚îú‚îÄ‚îÄ back/                          # Backend Spring Boot
‚îÇ   ‚îú‚îÄ‚îÄ src/main/java/com/digicamp/monitoring/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ application/service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FileStorageService.java        # Interface upload
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/model/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Project.java                   # +logoUrl
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Collaborator.java              # +photoUrl
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StorageProperties.java     # Config upload
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ FileStorageServiceImpl.java # Impl√©mentation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ presentation/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ FileController.java        # Endpoints upload
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ project/ProjectRequest.java  # +logoBase64
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ collaborator/CollaboratorRequest.java # +photoBase64
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ front/                         # Frontend Angular
‚îÇ   ‚îú‚îÄ‚îÄ src/app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/                  # Services, Guards, Models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features/              # Feature Modules
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authentication/    # Login, Register
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # Dashboard
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects/          # Projects + Dialogs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ project-form-dialog/    # CRUD + Upload
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ collaborators/     # Collaborators + Dialogs
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ collaborator-form-dialog/ # CRUD + Upload
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared/                # Shared Components
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ components/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ image-upload/
‚îÇ   ‚îÇ               ‚îî‚îÄ‚îÄ image-upload.component.ts # Composant Upload
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ docs/                          # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ QUICKSTART.md             # D√©marrage rapide
‚îÇ   ‚îú‚îÄ‚îÄ TECHNICAL_DOCUMENTATION.md # Doc technique avec diagrammes
‚îÇ   ‚îú‚îÄ‚îÄ USER_GUIDE.md             # Guide utilisateur complet
‚îÇ   ‚îú‚îÄ‚îÄ STYLE_GUIDE.md            # Guide de style SCSS
‚îÇ   ‚îú‚îÄ‚îÄ DOCKER_DEPLOYMENT.md      # Guide Docker
‚îÇ   ‚îú‚îÄ‚îÄ IMAGE_UPLOAD_GUIDE.md     # üÜï Guide upload d'images
‚îÇ   ‚îî‚îÄ‚îÄ API_ENDPOINTS_STATUS.md   # üÜï √âtat des endpoints (17/32)
‚îú‚îÄ‚îÄ uploads/                       # üÜï Fichiers upload√©s (gitignore)
‚îÇ   ‚îú‚îÄ‚îÄ projects/                  # Logos de projets
‚îÇ   ‚îî‚îÄ‚îÄ collaborators/             # Photos de collaborateurs
‚îú‚îÄ‚îÄ docker-compose.yml            # Configuration Docker
‚îî‚îÄ‚îÄ README.md                     # Ce fichier
```

## üîí S√©curit√©

### Authentification JWT

- **Token** g√©n√©r√© √† la connexion
- **Dur√©e de vie** : 24 heures
- **Stockage** : localStorage
- **Refresh** : Automatique
- **Endpoints prot√©g√©s** : Tous sauf `/api/auth/*` et `GET /api/files/**`

### S√©curit√© des Uploads

- **Validation MIME types** : Uniquement images autoris√©es
- **Taille maximale** : 5MB (configurable)
- **Noms uniques** : UUID pour √©viter les collisions
- **Path traversal prevention** : Validation des chemins
- **Sanitization** : Nettoyage des noms de fichiers
- **Stockage isol√©** : R√©pertoires s√©par√©s par type

### S√©curit√© des Donn√©es

- **Mots de passe hash√©s** : bcrypt
- **CORS configur√©** : localhost uniquement
- **Validation** : Frontend + Backend
- **SQL Injection** : Protection JPA/Hibernate

## üì° API Endpoints

### Authentification
```http
POST   /api/auth/login          # Connexion
POST   /api/auth/register       # Inscription
GET    /api/auth/me             # Utilisateur courant
```

### Projets
```http
GET    /api/projects?page=0&size=10    # Liste pagin√©e
POST   /api/projects                    # Cr√©er (+ logoBase64)
GET    /api/projects/{id}               # D√©tails
PUT    /api/projects/{id}               # Modifier
DELETE /api/projects/{id}               # Supprimer
POST   /api/projects/{id}/collaborators # Affecter collaborateurs
POST   /api/projects/{id}/newsletter    # G√©n√©rer newsletter
```

### Collaborateurs
```http
GET    /api/collaborators?page=0&size=10&available=true  # Liste
POST   /api/collaborators                                 # Cr√©er (+ photoBase64)
GET    /api/collaborators/{id}                           # D√©tails
PUT    /api/collaborators/{id}                           # Modifier
DELETE /api/collaborators/{id}                           # Supprimer
```

### üÜï Fichiers/Upload
```http
POST   /api/files/upload/image           # Upload multipart
POST   /api/files/upload/base64          # Upload Base64
GET    /api/files/{directory}/{filename} # R√©cup√©rer image (public)
DELETE /api/files/{directory}/{filename} # Supprimer image
```

üìò **Pour plus de d√©tails :**
- [Documentation Technique](./docs/TECHNICAL_DOCUMENTATION.md)
- [Guide Upload d'Images](./docs/IMAGE_UPLOAD_GUIDE.md)
- [√âtat des Endpoints API](./docs/API_ENDPOINTS_STATUS.md) - **17/32 endpoints impl√©ment√©s (53%)**

## üß™ Tests

### Backend
```bash
cd back
./mvnw test
```

### Frontend
```bash
cd front
npm test
npm run e2e
```

## üêõ D√©pannage

### Docker

**Probl√®me : Les conteneurs ne d√©marrent pas**
```bash
# Arr√™ter et nettoyer
docker-compose down -v

# Rebuild et red√©marrer
docker-compose up -d --build
```

**Probl√®me : Base de donn√©es non cr√©√©e**
```bash
# V√©rifier les logs du service db-init
docker-compose logs db-init

# Recr√©er la base manuellement
docker exec -it digicampmonitoring-sqlserver-1 /opt/mssql-tools18/bin/sqlcmd \
  -S localhost -U sa -P "YourStrong@Passw0rd" -C \
  -Q "CREATE DATABASE digicampdb"
```

### Frontend

**Probl√®me : CORS Error**
- V√©rifiez que le backend est d√©marr√©
- V√©rifiez `SecurityConfiguration.java` pour les origines autoris√©es

**Probl√®me : Module not found**
```bash
cd front
rm -rf node_modules package-lock.json
npm install
```

### Backend

**Probl√®me : Port 8080 d√©j√† utilis√©**
```bash
# Trouver le processus
lsof -i :8080

# Ou changer le port dans application.yml
server.port=8081
```

**Probl√®me : Uploads √©chouent**
```bash
# V√©rifier les permissions du r√©pertoire uploads
mkdir -p uploads/projects uploads/collaborators
chmod -R 755 uploads/
```

üêõ **Pour plus de solutions, consultez le [Guide de D√©ploiement Docker](./docs/DOCKER_DEPLOYMENT.md#-d√©pannage)**

## ü§ù Contribution

1. Fork le projet
2. Cr√©er une branche (`git checkout -b feature/AmazingFeature`)
3. Commit les changements (`git commit -m 'Add AmazingFeature'`)
4. Push vers la branche (`git push origin feature/AmazingFeature`)
5. Ouvrir une Pull Request

### Guidelines

- Suivez le [Guide de Style](./docs/STYLE_GUIDE.md)
- Ajoutez des tests pour les nouvelles fonctionnalit√©s
- Mettez √† jour la documentation si n√©cessaire
- Utilisez des messages de commit clairs et descriptifs

## üìù Roadmap

### ‚úÖ Version 1.0 (Actuel)
- [x] CRUD Projets avec upload de logo
- [x] CRUD Collaborateurs avec upload de photo
- [x] Composant ImageUpload r√©utilisable
- [x] FileStorageService avec support Base64
- [x] Documentation compl√®te (7 guides)

### üöß Version 1.1 (En cours - 53% compl√©t√©)
- [x] Upload d'images avec drag & drop
- [x] Syst√®me de fichiers Backend
- [ ] Endpoints Project Status (2)
- [ ] Endpoints Project Assignments (5)
- [ ] Endpoints Project Needs (5)
- [ ] Dashboard & Statistiques (3)
- [ ] Templates de newsletter personnalisables
- [ ] Import/Export CSV de collaborateurs

### üîÆ Version 2.0 (Futur)
- [ ] D√©l√©gation de droits EM
- [ ] Notifications en temps r√©el
- [ ] Mode sombre
- [ ] Multi-tenancy
- [ ] Gestion des cong√©s
- [ ] Planning Gantt
- [ ] API publique avec Swagger
- [ ] Application mobile

## üìÑ Licence

Ce projet est priv√© et destin√© uniquement √† un usage interne Digicamp.

## üë• Auteurs

- **Engineering Manager** - Digicamp
- **D√©veloppeur** - [@Soufiane4906](https://github.com/Soufiane4906)

## üôè Remerciements

- Spring Boot team
- Angular team
- PrimeNG team
- Quill.js team
- La communaut√© open source

---

## üìû Support

Pour toute question ou assistance :

- üìß **Email** : support@digicamp.com
- üìö **Documentation** : [docs/](./docs/)
- üêõ **Issues** : [GitHub Issues](https://github.com/Soufiane4906/DigicampMonitoring/issues)

---

<div align="center">
  <strong>Fait avec ‚ù§Ô∏è pour Digicamp</strong>
  <br>
  <sub>Version 1.0.0 - 12 octobre 2025</sub>
  <br>
  <sub>üÜï Nouveau : Upload d'images avec drag & drop moderne</sub>
</div>
